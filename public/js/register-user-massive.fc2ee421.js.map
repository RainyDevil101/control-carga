{"version":3,"file":"js/register-user-massive.fc2ee421.js","mappings":"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","sources":["webpack://backend/./src/modules/register/views/UserMassiveRegistation.vue","webpack://backend/./src/modules/register/composables/uploadExcelUsers.js","webpack://backend/./src/modules/register/views/UserMassiveRegistation.vue?aebe"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"container-massive\">\r\n      <div class=\"massive-header\">\r\n        <h1>Carga de usuarios</h1>\r\n      </div>\r\n\r\n      <div class=\"instructions\">\r\n        <p>\r\n          Descargue la plantilla Excel que encontrará abajo e ingrese los datos\r\n          en el formato que aparece ahí, para que los datos sean cargados\r\n          correctamente tenga en cuenta lo siguiente:\r\n        </p>\r\n        <hr />\r\n        <ul>\r\n          <li>Los nombres y apellidos deben ir en sus respectivas celdas.</li>\r\n          <li>Los usuarios deben tener un email válido.</li>\r\n          <li>\r\n            Debe ingresar el rut con alguno de los siguientes formatos:\r\n            <ul>\r\n              <li>12.345.678-9</li>\r\n              <li>123456789</li>\r\n              <li>12*345*678*9</li>\r\n              <li>12345678-9</li>\r\n            </ul>\r\n          </li>\r\n          <li>\r\n            <p>Las divisiones deben escribirse de la siguiente manera:</p>\r\n            <ul>\r\n              <li>TENIENTE</li>\r\n              <li>ANDINA</li>\r\n              <li>VENTANAS</li>\r\n              <li>SALVADOR</li>\r\n              <li>CHUQUICAMATA</li>\r\n              <li>ESPORADICOS ANDINA</li>\r\n              <li>ESPORADICOS TENIENTE</li>\r\n              <li>CASA MATRIZ</li>\r\n            </ul>\r\n          </li>\r\n          <li>\r\n            <p>El cargo debe ser uno de los siguientes:</p>\r\n            <ul>\r\n              <li>PLANIFICADOR</li>\r\n              <li>OPERADOR LOGISTICO</li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div class=\"form-massive\">\r\n        <form @submit.prevent=\"onSubmit\">\r\n          <div class=\"input-button\">\r\n            <input\r\n              type=\"file\"\r\n              @change=\"onFile\"\r\n              id=\"excel-file\"\r\n              accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n            />\r\n            <div class=\"button-align download-plantilla\">\r\n              <button @click=\"onDownload\" type=\"button\" class=\"buttons-styles\">\r\n                Descargar plantilla\r\n              </button>\r\n            </div>\r\n            <div class=\"button-align select-file\">\r\n              <label class=\"buttons-styles\" for=\"excel-file\"\r\n                >Seleccionar archivo</label\r\n              >\r\n            </div>\r\n            <div class=\"button-align load-file-button\">\r\n              <button type=\"submit\" class=\"buttons-styles\" value=\"Store File\">\r\n                Cargar\r\n              </button>\r\n            </div>\r\n            <div class=\"button-align back-button\">\r\n              <button\r\n                type=\"button\"\r\n                @click=\"$router.push({ name: 'select-register' })\"\r\n                class=\"buttons-styles\"\r\n              >\r\n                Volver\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"@vue/reactivity\";\r\nimport { useStore } from \"vuex\";\r\nimport uploadUsers from \"../composables/uploadExcelUsers\";\r\nimport Swal from \"sweetalert2\";\r\nexport default {\r\n  setup() {\r\n    const store = useStore();\r\n    const localFile = ref(null);\r\n\r\n    const { sendData } = uploadUsers();\r\n\r\n    return {\r\n      localFile,\r\n      sendData,\r\n\r\n      onSubmit: async () => {\r\n        new Swal({\r\n          title: \"Espere por favor\",\r\n          allowOutsideClick: false,\r\n        });\r\n        Swal.showLoading();\r\n\r\n        const { errors, nice, message } = await sendData(localFile.value);\r\n\r\n        if (nice.value === false) {\r\n          Swal.fire(\"Error\", `${errors.value}.`, \"error\").then(function (\r\n            result\r\n          ) {\r\n            if (true) {\r\n              location.reload();\r\n            }\r\n          });\r\n          return;\r\n        } else {\r\n          await store.dispatch(\"users/loadUsers\");\r\n\r\n          Swal.fire(\"Guardado\", `${message.value}`, \"success\").then(function (\r\n            result\r\n          ) {\r\n            if (true) {\r\n              location.reload();\r\n            }\r\n          });\r\n        }\r\n      },\r\n      onFile: async (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) {\r\n          localFile.value = null;\r\n          return;\r\n        } else {\r\n          localFile.value = file;\r\n          console.log(localFile.value);\r\n        }\r\n      },\r\n      onDownload: async () => {\r\n        const plantilla = \"../files/plantilla_carga_usuarios.xlsx\";\r\n        window.location.href = plantilla;\r\n      },\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nh1 {\r\n  margin: 8px 0 8px 0;\r\n}\r\n\r\np {\r\n  margin: 8px 0 8px 0;\r\n}\r\n.wrapper {\r\n  padding-top: 4rem;\r\n  min-height: 100vh;\r\n  min-width: 100vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.container-massive {\r\n  background-color: white;\r\n  border-radius: 4px;\r\n  margin: 4px;\r\n}\r\n\r\n.form-massive {\r\n  padding: 1rem;\r\n}\r\n\r\n.input-button {\r\n  display: block;\r\n  margin: auto;\r\n}\r\n\r\n.button-align {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 4px 0 4px 0;\r\n}\r\n\r\n.buttons-styles {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: black;\r\n  border-radius: 4px;\r\n  color: white;\r\n  padding: 8px;\r\n  width: 9.8rem;\r\n  height: 44px;\r\n  border: none;\r\n  cursor: default;\r\n    transition: 0.2s;\r\n\r\n  &:hover {\r\n    background-color: rgba($color: #444444, $alpha: 1.0);\r\n  }\r\n\r\n}\r\n\r\ninput[type=\"file\"] {\r\n  display: none;\r\n}\r\n\r\n.download-file {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 4px 0 4px 0;\r\n}\r\n\r\n.instructions {\r\n  max-width: 680px;\r\n}\r\n\r\n.massive-header {\r\n  text-align: center;\r\n  margin: 4px 0 4px 0;\r\n}\r\n\r\n@media screen and(min-width: 720px) {\r\n  .input-button {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n  .container-massive {\r\n  padding: 1rem;\r\n}\r\n\r\n}\r\n</style>","import { ref } from \"vue\";\r\nimport backendConnect from \"../../../api/backend\";\r\n\r\nconst uploadUsers = () => {\r\n  const errors = ref(true);\r\n  const nice = ref(null);\r\n  const message = ref(null);\r\n\r\n  const sendData = async (excelFile) => {\r\n    if (!excelFile) {\r\n        errors.value = 'Debe seleccionar un archivo';\r\n        nice.value = false;\r\n        return { errors, nice };\r\n    };\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", excelFile);\r\n\r\n      const { data } = await backendConnect.post(\r\n        \"/api/userExcel/uploadFile\",\r\n        formData,\r\n        {\r\n          headers: { \"x-token\": localStorage.getItem(\"token\") },\r\n        }\r\n      );\r\n\r\n      console.log(data);\r\n\r\n      nice.value = true;\r\n      errors.value = false;\r\n      message.value = data.msg;\r\n\r\n      return { errors, nice, message };\r\n    } catch (error) {\r\n      if (error.response.data.msg) {\r\n        errors.value = error.response.data.msg\r\n        nice.value = false;\r\n        console.log(errors.value);\r\n        return { errors, nice, message };\r\n      } else if (error.response.data.errors) {\r\n        const msgErr = [];\r\n        const errorsDb = error.response.data.errors;\r\n        for (const error of errorsDb) {\r\n          msgErr.push(\" \" + error.msg);\r\n        }\r\n        errors.value = msgErr;\r\n        nice.value = false;\r\n        return { errors, nice, message };\r\n      } else {\r\n        errors.value = true;\r\n        nice.value = false;\r\n        return { errors, nice, message };\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    errors,\r\n    sendData,\r\n    nice,\r\n    message,\r\n  };\r\n};\r\n\r\nexport default uploadUsers;\r\n","import { render } from \"./UserMassiveRegistation.vue?vue&type=template&id=c429eaa2&scoped=true\"\nimport script from \"./UserMassiveRegistation.vue?vue&type=script&lang=js\"\nexport * from \"./UserMassiveRegistation.vue?vue&type=script&lang=js\"\n\nimport \"./UserMassiveRegistation.vue?vue&type=style&index=0&id=c429eaa2&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Gorilla Setups\\\\Desktop\\\\control-proyect\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c429eaa2\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","type","value","_createElementBlock","_hoisted_3","onSubmit","$setup","onChange","id","accept","onClick","_hoisted_8","_hoisted_9","_ctx","push","name","uploadUsers","errors","ref","nice","message","sendData","async","excelFile","formData","FormData","append","data","backendConnect","headers","localStorage","getItem","console","log","msg","error","response","msgErr","errorsDb","setup","store","useStore","localFile","Swal","title","allowOutsideClick","dispatch","then","result","location","reload","onFile","file","event","target","files","onDownload","plantilla","window","href","__exports__","render"],"sourceRoot":""}